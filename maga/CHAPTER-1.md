# Глава 1. Основы и мотивация для создания открытой доверенной операционной системы для СнК на архитектуре RISC-V

 ## 1.1 Основы и мотивация

  ### 1.1.1 Общие сведения о доверенных средах выполнения

   #### 1.1.1.1 Введение в доверенные среды выполнения

   Практически все современные вычислительные устройства,
   начиная от смартфонов и ПК, до автомобилей и серверных систем,
   используют несколько операционных систем
   одновременно на одном процессоре.
   Такие вычислительные среды обычно состоит из
   обычной среды исполнения,
   в которой работают основная операционная система
   и пользовательские приложения,
   и отдельной безопасной среды выполнения,
   предназначенной для защиты конфиденциальных данных и кода.
   Основная цель такого разделения - обеспечить аппаратную изоляцию,
   позволяющую безопасно выполнять конфиденциальные вычисления, такие как
   криптография, управление цифровыми правами (DRM) или обработка платежей
   без возможности вмешательства внешних компонентов системы
   или потенциальных злоумышленников.

   При такой конфигурации с двумя средами
   обычная операционная система управляет повседневными задачами,
   в то время как конфиденциальные операции
   выполняются в защищенной среде.
   Такое разделение имеет решающее значение
   для обеспечения безопасности и целостности
   конфиденциальных данных и операций.
   Обычный мир (или Нормальный мир),
   в котором работает основная операционная система,
   обычно считается ненадежным по сравнению с защищенным миром,
   который спроектирован так,
   чтобы быть безопасным и изолированным.

   Концепция доверенных сред исполнения (TEE)
   стала важнейшим компонентом современных архитектур.
   TEE обеспечивают безопасную среду
   для выполнения конфиденциального кода и
   обработки конфиденциальных данных,
   изолированную от обычной среды выполнения.
   Эта изоляция обеспечивается аппаратными механизмами,
   гарантирующими, что даже в случае полной компроментации
   основной операционной системы или приложений
   в нормальном мире - безопасность конфиденциальных данных
   в защищенном мире остается неизменной.

   Таким образом, доверенные среды исполнения
   являются фундаментальным компонентом
   современных вычислительных сред.
   Обеспечение необходимой изоляции
   и защита конфиденциальных данных и кодв
   делает их незаменимыми в современных реалиях.

   #### 1.1.1.2 Эволюция доверенных сред исполнения

   С момента появления - доверенные среды исполнения
   претерпели значительные изменения,
   обусловленные необходимостью безопасного выполнения кода
   и конфиденциальности данных в современных вычислительных системах.
   Концепция TEE возникла как ответ на растущий спрос на безопасные среды, способные защитить от различных типов атак и угроз.

   Самыми ранними формами TEE были
   специализированные защищенные сопроцессоры
   или специальные аппаратные модули,
   такие как смарт-карты и доверенные платформенные модули (TPMS).
   Эти ранние реализации были разработаны
   для обеспечения безопасной среды для
   выполнения конкретных задач,
   таких как криптографические операции
   и безопасная аутентификация.
   Как правило, они были изолированы от основного процессора
   и обладали собственными защищенными возможностями
   хранения и обработки данных.

   По сравнению со старыми версиями TEE,
   современные TEE стали более интегрированными
   с основным процессором и операционной системой.
   Нынешние Доверенные Системы Исполнения предлагают
   более продвинутые функции безопасности,
   такие как шифрование памяти,
   безопасная загрузка и механизмы проверки подлинности.
   Современные TEE также обеспечивают более гибкую и программируемую среду,
   позволяющую выполнять сложные приложения и сервисы.

   Эволюция TEE позволила получить представление
   о разработке и внедрении Доверенных Сред Исполнения.
   Ожидается, что будущие разработки TEE будут направлены на устранение
   все новых возникающих угроз и вызовов.
   Кроме того, TEE, вероятно, станут еще более интегрированными
   с основными вычислительными системами,
   что позволит более эффективно и безопасно выполнять
   доверенный код и сохранять конфиденциальность данных.

   #### 1.1.1.3 Роль доверенных сред исполнения в современных архитектурах безопасности

   Доверенные среды выполнения играют решающую роль в
   современных архитектурах безопасности,
   обеспечивая безопасную среду для
   выполнения доверенного кода и
   обработки конфиденциальных данных.
   Современные TEE, такие как
   ARM TrustZone и Intel SGX,
   обеспечивают аппаратную изоляцию основного процессора.
   Такая изоляция позволяет выполнять
   сложные доверенные приложения в сочетании
   с богатой функционалом универсальной операционной системой.

   Возможности современных TEE
   выходят за рамки простых криптографических задач.
   Они поддерживают широкий спектр сложных приложений,
   включая защищенный пользовательский интерфейс,
   сертификацию, аттестацию
   и доверенные вычисления в облачных инфрастуктурах.

   Несмотря на их популярность и значительные преимущества,
   которые предлагают доверенные системы исполнения,
   спрос на TEE с прозрачными интерфейсами и
   открытым исходным кодом остается.
   Основными причинами этого спроса являются
   стремление преодолеть зависимость от поставщиков
   и повысить безопасность с помощью тщательных проверок.
   TEE с открытым исходным кодом могут быть
   тщательно изучены более широким кругом участников сообщества,
   что потенциально может привести к
   более безопасной реализации,
   поскольку уязвимости могут быть
   выявлены и устранены более эффективно.

   Более того, поскольку вычислительные среды становятся
   все более разнородными и многоядерными,
   растет потребность в TEE,
   которые могут эффективно поддерживать такие архитектуры.
   Способность управлять разнообразными вычислительными
   ресурсами и обеспечивать их безопасность
   становится необходимым условием
   для поддержания общего уровня безопасности
   современных систем.

  ### 1.1.2. Текущее состояние ДСИ в проприетарных архитектурах

   #### 1.1.2.1. Ограничения существующих ДСИ в проприетарных архитектурах

   Традиционные доверенные среды исполнения
   в проприетарных архитектурах,
   таких как платформы ARM, Intel и AMD,
   накладывают ряд фундаментальных ограничений.
   Эти ограничения влияют как на гибкость
   решений по обеспечению безопасности,
   так и на более широкую технологическую экосистему.

   Большинство проприетарных TEE тесно связаны
   с платформой поставщика оборудования,
   что создает среду сильной привязанности к поставщику.
   Потребители этих технологий,
   будь то системные интеграторы
   или разработчики приложений,
   зависят от производителя оборудования
   в плане долгосрочных обновлений безопасности,
   поддержки и совместимости с экосистемой.
   Эта зависимость ограничивает
   внедрение пользовательских функций
   и препятствует внедрению инноваций,
   поскольку все усовершенствования
   должны согласовываться с планом действий
   поставщика и процессом утверждения.

   Реализации проприетарных TEE, как правило,
   имеют закрытый исходный код,
   а важные архитектурные детали остаются нераскрытыми.
   Отсутствие прозрачности означает,
   что пользователи и исследователи не могут
   в полной мере проводить аудит,
   изменять или проверять
   корректность и безопасность реализаций TEE.
   Кроме того, разработка надежных приложений зависит
   от жестко контролируемых инструментов поставщиков,
   SDK и проприетарных API,
   которые препятствуют переносимости,
   независимой проверке и росту экосистемы
   сторонних разработчиков.

   Традиционные производители проприетарных процессоров
   предоставляют только фиксированный набор команд,
   практически без возможности настройки или расширения
   системными интеграторами.
   Такое отсутствие гибкости ISA
   замедляет реагирование на возникающие угрозы
   и ограничивает возможности исследователей
   в изучении альтернативных конструкций TEE.

   Каждая запатентованная архитектура,
   как правило, обеспечивает свою собственную
   уникальную реализацию TEE,
   спецификации интерфейса и управление жизненным циклом.
   В результате, TEE, как правило,
   несовместимы между поставщиками
   или даже между различными линейками продуктов
   одного и того же поставщика.
   Такой изолированный подход приводит к фрагментации,
   усложняет разработку кросс-платформенных
   защищенных приложений и
   сокращает возможности для более широкой стандартизации
   и внедрения передовых методов
   обеспечения безопасности
   в масштабах всей отрасли.

   #### 1.1.2.2 Лицензирование на проприетарных архитектурах

   Требования к лицензированию,
   связанные с проприетарными архитектурами,
   такими как ARM TrustZone и Intel SGX,
   играют основную роль в формировании
   экосистемы сред доверенного исполнения.
   Эти лицензии имеют важные экономические,
   юридические и технические последствия,
   которые влияют на каждый этап разработки
   и развертывания защищенных операционных систем.

   Одним из важнейших последствий лицензирования является
   его непосредственное влияние
   на экономику разработки устройств и систем.
   Доступ к расширениям безопасности или ДСИ
   обычно влечет за собой значительные лицензионные платежи,
   которые должны выплачиваться либо авансом
   в качестве затрат на разработку,
   либо постоянно в виде лицензионных отчисленый,
   привязанных к объемам производства.
   Для развивающихся компаний и инновационных проектов,
   работающих с ограниченными ресурсами,
   эти затраты могут стать существенными препятствиями
   для выхода на рынок.
   Даже для хорошо зарекомендовавших себя поставщиков
   эти сборы увеличивают общую стоимость продукта,
   снижая рентабельность и приводя к увеличению затрат
   для конечных пользователей.

   Кроме того, наличие ограничений на лицензирование
   может ограничить масштабируемость.
   Например, эксперименты с новыми сферами использования,
   разработка пользовательских аппаратных расширений
   или внедрение модификаций продуктов
   для нишевых или региональных рынков
   могут стать непомерно дорогостоящими,
   если каждое изменение требует пересмотра условий
   или дополнительных затрат на лицензирование.

   Помимо финансовых затрат,
   лицензионные соглашения четко определяют
   и часто ограничивают допустимые сценарии использования
   и профили разрабатываемых устройств.
   Эти ограничения могут касаться конфигураций оборудования,
   конкретных программных пакетов
   или географии производства и продажи.
   Они также могут препятствовать техническим инновациям,
   поскольку любое желаемое отклонение
   от эталонных платформ или требований
   к программному обеспечению поставщика,
   скорее всего, потребует повторной юридической проверки
   и новых переговоров о лицензировании.

   Кроме того, наибольшую обеспокоенность
   у многих долгосрочных проектов вызывает неопределенность,
   связанная с использованием лицензий третьих лиц.
   Поставщики могут в одностороннем порядке
   изменять условия лицензирования,
   вводя новые ограничения,
   увеличивая затраты или даже полностью отказать в правах.
   Такая непредсказуемость особенно актуальна для продуктов,
   рассчитанных на длительный срок службы
   (например, промышленных контроллеров,
   автомобильных ЭБУ,
   медицинских устройств),
   где безопасная эксплуатация и техническое обслуживание
   могут потребоваться в течение десятилетия и более.
   Чрезмерная зависимость от внешнего лицензирования
   представляет потенциальную угрозу устойчивости проекта,
   его ремонтопригодности и даже соблюдению нормативных требований.

   Таким образом, операционная гибкость оказывается ограничена.
   Это особенно проблематично в исследовательских средах
   (при быстром создании прототипов)
   и в промышленных приложениях на заказ
   (где необходимы эксперименты и быстрая итерация).
   Наличие эталонных разработок с закрытым исходным кодом
   и фирменного микропрограммного обеспечения
   еще больше ограничивает возможности пользователей
   по проверке или настройке низкоуровневых механизмов безопасности,
   препятствуя прозрачности и независимой проверке.

   Эти ограничения в совокупности создают
   замкнутость вокруг проприетарных ДСИ,
   препятствуя функциональной
   совместимости и независимому росту экосистемы.
   Сотрудничество между независимыми поставщиками,
   исследовательскими институтами
   и сообществом разработчиков
   с открытым исходным кодом ограничено
   правовой неопределенностью
   и отсутствием доступа к базовым технологиям.
   В результате общий темп внедрения инноваций
   в области безопасных вычислений замедляется.
   Техническому сообществу не удается
   коллективно реагировать на новые угрозы
   или разрабатывать и внедрять новые средства защиты.

  ### 1.1.3. Перспективы RISC-V: открытость и расширяемость

   #### 1.1.3.1. Аппаратное обеспечение с открытым исходным кодом

   В резком контрасте с этой устоявшейся парадигмой,
   зараждение движения за
   аппаратное обеспечение с открытым исходным кодом (OSHW),
   примером которого является появление и стремительный рост RISC-V,
   предлагает преобразующую альтернативу.
   RISC-V - это не реализация конкретного процессора,
   а ISA с открытым стандартом,
   что означает, что его базовая спецификация
   и связанная с ней документация находятся
   в свободном доступе для любого пользователя,
   который может использовать, внедрять,
   проектировать или расширять их без лицензионных сборов
   или ограничительных соглашений.
   Этот фундаментальный переход от патентованного контроля
   имеет глубокие последствия для полупроводниковой промышленности
   и за ее пределами.

   Открытость, присущая RISC-V,
   способствует созданию действительно
   объединенной модели разработки.
   Это позволяет разнообразному мировому сообществу,
   включающему академических исследователей,
   отраслевые консорциумы,
   стартапы и признанные корпорации,
   вносить свой вклад в развитие ISA,
   разрабатывать широкий спектр основных реализаций
   (от глубоко встраиваемых микроконтроллеров
   до высокопроизводительных процессоров серверного класса)
   и делиться вспомогательными инструментами
   и программным обеспечением.
   Коллективные усилия ускоряют внедрение инноваций,
   облегчают изучение новых архитектурных особенностей
   и позволяют быстро изменять дизайн.

   Кроме того, прозрачность, обеспечиваемая открытой ISA,
   имеет первостепенное значение в контексте безопасности.
   Благодаря общедоступности спецификации и тому,
   что многие основные реализации также имеют открытый исходный код
   (доступны в виде RTL),
   проекты могут быть тщательно изучены,
   проверены на наличие потенциальных уязвимостей
   в системе безопасности независимыми
   третьими сторонами и официально подтверждены.
   Такой подход значительно расширяет возможности
   выявления и устранения недостатков в системе безопасности.
   В отличие от того,
   чтобы полагаться исключительно на заявления одного поставщика,
   контролирующего запатентованный непрозрачный дизайн.
   Такая прозрачность имеет решающее значение для укрепления доверия,
   поскольку снижает опасения по поводу
   нераскрытых функциональных возможностей,
   преднамеренных бэкдоров или недокументированного
   поведения самого процессорного оборудования.
