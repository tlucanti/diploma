# Аннотация

# Оглавление

# Введение
 ## Актуальность
  - о безопасности пользовательских данных
  - нужда в Доверенной Системе Исполнения
  - нужда в операционной системе для обеспечения ДСИ
 ## Цель исследования
  - создание доверенной операционной системы для СнК на архитектуре RISC-V с расширением WorldGuard
 ## Задачи исследования
  - анализ существующих ДСИ и защищенных операционных систем
  - Разработка Capability-Based модели безопасности
  - Разработка доверенной операционной системы с Capability-Based моделью безопасности
 ## Объект исследования
  - Доверенные среды выполнения на процессорах с архитектурой RISC-V
 ## Предмет исследования
  - Доверенные операционные системы на процессорах с архитектурой RISC-V
 ## Методы исследования
  - *скопировать у Леши*
 ## Научная новизна
  - Создание Доверенной операционной системы для процессоров с архитектурой RISC-V
 ## Практическая значимость работы
  - Обеспечение ДСИ для расширения WorldGuard
 ## Достоверность полученных результатов и выводов
  - Достоверность основана на результатах эксперимента
 ## Положения выносимые на защиту
  ### Защищенная операционная
система ## Поддержка компьютера по всему миру
  ### брат
 ## Структура работы
  ### глава 1:
   #### ...
  ### глава 2:
   #### ...
  ### глава 3:
   #### ...
  ### глава 4:
   #### ...

---

# Глава 1. Основы и мотивация создания открытой доверенной операционной системы на RISC-V
 ## Общие сведения и мотивация
  ### Общие сведения о надежных средах выполнения
   #### Введение в надежные среды выполнения
   - Современные парадигмы работы устройств: Современные устройства — от смартфонов до Интернета вещей и серверов — часто работают под управлением нескольких операционных систем одновременно на одном процессоре.
   - Параллельные операционные среды: Как правило, существует обычная среда выполнения, в которой работают основная ОС и приложения, и отдельная защищенная среда выполнения, предназначенная для защиты конфиденциального кода и данных.
   - Цель такого разделения: обеспечить аппаратную изоляцию, которая позволяет безопасно выполнять конфиденциальные вычисления (например, криптографию, DRM, обработку платежей) без вмешательства обычных компонентов системы или потенциальных злоумышленников.
   - обычная операционная система управляет повседневными задачами, но конфиденциальные операции выполняются в защищенной среде.
   #### Эволюция надежных сред выполнения
   - Краткая история использования TEE в современных вычислениях
   - выделенные защищенные сопроцессоры или специальные аппаратные модули (например, смарт-карты, TPMS).
   - Сравнение различных реализаций TEE: типичная архитектура, методы коммуникации, зрелость экосистемы
   #### Роль TEE в современных архитектурах безопасности
   - Современные интерфейсы, такие как ARM TrustZone и Intel SGX, обеспечивают тесную интеграцию и аппаратную изоляцию основного процессора, что позволяет запускать сложные надежные приложения в сочетании с богатой операционной средой
   - современные TEE поддерживают широкий спектр сложных приложений, выходящих за рамки простых криптографических задач, включая защищенный пользовательский интерфейс, сертификацию и надежные вычисления в облаке и на периферии
   - но, несмотря на такую популярность, по-прежнему существует спрос на прозрачные TEE с открытым исходным кодом, позволяющие преодолеть зависимость от поставщиков и улучшить аудит безопасности
   - Растет потребность в поддержке более разнородных и многоядерных сред
  ### Текущее состояние TEE на проприетарных архитектурах
   #### Ограничения существующих TEE на проприетарных архитектурах
   - Привязка к поставщикам и зависимость от них
   - Закрытые и проприетарные экосистемы
   #### Технические и эксплуатационные проблемы
   - Сложность и жесткость аппаратного обеспечения
   - Фиксированный ISA без возможности адаптации или расширения
   #### Лицензирование в несвободных архитектурах
   - Экономическое воздействие несвободного лицензирования
   - Лицензионные сборы увеличивают затраты на разработку и производство
   - Условия лицензирования могут ограничивать сценарии использования или варианты продукта
   - Неопределенность и риски, связанные с моделями лицензирования
   - Условия лицензии или доступность могут меняться со временем
   - Потенциальный юридический риск и комплаенс-риск для долгосрочных проектов, зависящих от лицензий поставщиков
  ### Возможности RISC-V: открытость и расширяемость
   #### Аппаратное обеспечение с открытым исходным кодом и появление RISC-V
   - большинство архитектур являются закрытыми и имеют собственные ISA и их последствия
   - Как открытость способствует совместной разработке, прозрачности и доверию
   - Растущее внедрение в отрасли и зрелость экосистемы
   #### Архитектура набора команд RISC-V (ISA)
   - Модульный и расширяемый дизайн ISA
   - масштабируемый
   - бесплатный
   - RISC
   - с открытым исходным кодом
   #### Преимущества открытой архитектуры для обеспечения безопасности
   - Снижение риска скрытых бэкдоров или проприетарных уязвимостей
   - Аудиты и улучшения безопасности, проводимые сообществом
   - Упрощает экспериментирование с пользовательскими расширениями безопасности

 ## Постановка проблемы
  ### Текущее состояние TEE в архитектуре RISC-V
   #### Текущее состояние экосистемы безопасности RISC-V
   - Незрелость экосистемы безопасности RISC-V
   - Фрагментированная и ограниченная поддержка программного обеспечения
   - Отсутствие зрелых, стандартизированных реализаций защищенных ОС и инструментов управления TEE
   - Экспериментальные проекты на ранней стадии с ограниченной стабильностью и внедрением
   #### Состояние WorldGuard
   - World Guard появилась недавно и продолжает развиваться
   - несмотря на отсутствие утвержденной спецификации, WG обладает полным набором функций, поддерживающих secure enclaves
   - но в WG enclaves нет программной поддержки TEE, такой как Secure OS
  ### Растущая потребность в открытых и гибких решениях
   #### Недостаток стандартов и интерфейсов Open TEE для RISC-V
   - Текущие TEE не имеют общедоступного исходного кода или тесно связаны с оборудованием или платформами поставщиков.
   - Внешним разработчикам сложно внедрять, проверять или расширять их.
   #### Мотивация к созданию надежной операционной системы с открытым исходным кодом
   - необходимость использования открытой защищенной операционной системы для RISC-V
   - Обеспечение минимальной доверенной вычислительной базы, гибкого планирования и управления жизненным циклом доверенных приложений
   - Создание бесперебойных и безопасных каналов связи между обычным и защищенным миром
   - Создание прозрачных, расширяемых и стандартных протоколов связи, которые могут развиваться в зависимости от возможностей оборудования
   #### Преимущества экосистемы
   - Демократизирует возможности защищенных вычислений на платформах RISC-V
   - Поощряет исследования, аудиты безопасности, проводимые сообществом, и ускоряет цикл инноваций
   - Снижает затраты и устраняет риски, связанные с зависимостью от поставщика, способствуя внедрению в научных кругах, стартапах и промышленности.

 ## Актуальность и приложения
  ### Быстрый рост RISC-V в коммерческой и промышленной областях
   #### Широкое внедрение в различных областях продуктов
   - RISC-V все быстрее внедряется в реальные коммерческие продукты, включая
   - Системы промышленного контроля и автоматизации производства
   - Локальные и периферийные платформы облачных вычислений
   - Сетевое оборудование и встраиваемую бытовую электронику
   - Подчеркивает, что RISC-V больше не является просто экспериментальным или академическим решением; его применение растет
   #### На сегодняшний день нет продуктов, интегрированных в систему безопасности
   - Несмотря на широкое использование, в существующих продуктах RISC-V в основном отсутствуют интегрированные функции безопасности или надежные среды выполнения
   - В отличие от экосистем ARM и x86, где технологии безопасности (TrustZone, SGX, SEV) глубоко внедрены во многие продукты
   - Это отсутствие частично объясняется относительной молодостью архитектуры RISC-V и развитием расширений безопасности
   #### Мотивация к разработке безопасных решений на основе RISC-V
   - Сильная рыночная мотивация: учитывая, насколько важна безопасность в аналогичных случаях использования ARM / x86, неизбежно появятся аналогичные защищенные продукты на базе RISC-V
   - Раннее привлечение имеет решающее значение для формирования и лидерства на этом перспективном рынке
   - очень хорошая возможность предоставить защищенную ОС с открытым исходным кодом и стек TEE, использующий специфичные для RISC-V функции (например, World Guard).
  ### Расширяющиеся требования к безопасности в современных вычислительных системах
   #### Основные функции безопасности в современных продуктах
   - Такие функции безопасности, как управление криптографическими ключами, безопасная загрузка и целостность встроенного ПО, сегодня являются базовыми для мобильных устройств, автомобильной электроники и облачных серверов
  #### Неиспользованный потенциал RISC-V для создания защищенных приложений
  - Возможность для RISC-V выйти на рынки, где в настоящее время доминируют собственные ISA, с открытой и прозрачной историей безопасности
  - Потенциальные приложения, требующие надежности:
  - защищенные персональные устройства
  - автомобильные системы
  - конфиденциальные облачные рабочие нагрузки
  - экосистемы Интернета вещей
  - Защищенные компоненты с открытым исходным кодом могут значительно снизить барьеры для внедрения и инноваций

## Сравнение с существующими архитектурами
  ### ARM TrustZone: Централизованная модель защищенного мира
   #### Обзор
   - Аппаратное разделение между обычным и защищенным миром, работающее на одних и тех же процессорных ядрах
   - В Secure World установлена защищенная операционная система, управляющая надежными приложениями
   #### Преимущества
   - Развитая экосистема с широким внедрением (мобильная, встраиваемая)
   - Эффективное переключение контекста между безопасным и обычным миром
   - Хорошо поддерживаемые отраслевые стандарты (например, GlobalPlatform TEE)
   #### Недостатки
   - Централизованная модель: единый безопасный мир может стать узким местом
   - Ограниченная масштабируемость в многоядерных системах (единый защищенный мир для всех ядер).
   - Границы безопасности сильно зависят от корректности программного обеспечения (доверенной ОС).
  ### Intel Software Guard Extensions (SGX): Изоляция на основе анклавов
   #### Обзор
   - Анклавы - это изолированные области памяти с аппаратным обеспечением для шифрования и защиты целостности данных
   - Приложения избирательно изолируют конфиденциальный код/данные внутри анклавов с высокой степенью детализации
   #### Преимущества
   - Гибкость для каждого приложения; несколько анклавов могут сосуществовать
   - Надежные возможности шифрования памяти и аттестации
   - Не требует отдельной защищенной операционной системы
   #### Недостатки
   - Ограниченный размер анклава и ограничения по сложности
   - Сложная модель программирования и проблемы совместимости
   - Уязвимости, обнаруженные в побочных каналах и атаках на спекулятивное выполнение
  ### AMD Secure Encrypted Virtualization (SEV)
   #### Обзор
   - Прозрачно шифрует всю память виртуальной машины для защиты гостевых виртуальных машин от взлома гипервизора
   - Поддерживает облачные сценарии с мультитенантной изоляцией
   #### Преимущества
   - Надежная защита виртуальных машин с минимальными изменениями в гостевой ОС.
   - Надежное аппаратное шифрование памяти с расшифровкой в режиме реального времени
   #### Недостатки
   - Ориентирован на виртуализацию; подходит не для всех встроенных или мобильных сценариев
   - Доверие в основном зависит от гипервизора и аппаратного обеспечения
   - Ограниченная степень детализации по сравнению с моделями enclave или secure world
  ### Расширение World Guard для RISC-V: Децентрализованная изоляция
   #### Обзор
   - Аппаратные расширения, позволяющие распределять память и выполнение с большей степенью детализации, чем в TrustZone
   - Поддерживает несколько изолированных доменов (“миров”), которые могут работать параллельно в многоядерных системах.
   #### Преимущества
   - Децентрализованный дизайн повышает масштабируемость и гибкость для многоядерных / мультитенантных систем
   - Open ISA позволяет расширять систему безопасности с помощью сообщества и прозрачно внедрять ее
   - Позволяет создавать новые безопасные ОС с индивидуальными политиками изоляции
   - WorldGuard обладает расширенным набором возможностей по сравнению с TrustZone, поэтому при использовании только двух миров - это будет полностью соответствовать модели TrustZone, и GlobalPlatform TEE API можно использовать с WorldGuard
   #### Недостатки
   - Ранняя стадия стандартизации и разработки: отсутствие широкой аппаратной и программной поддержки.
   - Ограниченная поддержка экосистемы и инструментов: В отличие от ARM TrustZone или Intel SGX, которые имеют готовые SDK, защищенные операционные системы, промежуточное программное обеспечение и инструменты разработчика, в World Guard в настоящее время отсутствует богатая экосистема
   - Необходимость в дополнительном стеке защищенного программного обеспечения: одной аппаратной поддержки недостаточно; полноценная надежная среда выполнения требует хорошо продуманной защищенной операционной системы, среды выполнения, драйверов и API-интерфейсов — они все еще находятся в стадии разработки или эксперимента для World Guard
   - Проблемы с внедрением и интероперабельностью: Фрагментация или различия в зависимости от поставщика могут препятствовать стандартизации и переносимости TEE на разные платформы
  ### Сводный и сравнительный анализ
   - * Параллельная сравнительная таблица или структурированное резюме по ключевым параметрам*
   - ...

 ## Сопутствующие работы
  ### Научные исследования по RISC-V TEE
   #### Обзор последних исследований по надежному исполнению для RISC-V
   - несколько статей по RISC-V, например
   - СоК: Понимание распространенных уязвимостей безопасности в системах TEE, поддерживаемых TrustZone
   - Разделение на группы с учетом требований анклава и безопасный обмен данными с Sirius
   #### Пробелы, выявленные в научных исследованиях
   - Отсутствие ...
  ### Проприетарные решения TEE с открытым исходным кодом по сравнению с Opsn
   #### Alibaba Cloud Link
   - тесно интегрированы с экосистемой Alibaba
   - используются в:
   - Alibaba Cloud
   - Платформа Интернета вещей
   - Передовые вычисления Интернета вещей
   #### Безопасный анклав Apple
   - TEE с аппаратной поддержкой в Apple SoC
   - используется в:
   - все устройства Apple: телефоны, телевизоры, ...
   #### Huawei - надежный партнер
   - Платформенное решение для обеспечения безопасности, развернутое на устройствах Huawei; запатентованная и закрытая экосистема
   - используется в:
   - все устройства Huawei: телефоны, телевизоры, ...
   #### Google Trusty
   - Android-версия TEE с открытым исходным кодом, управляемая Google
   - используется в:
   - google pixel
   - chromebook
   #### Samsung TEEgris
   - собственная версия TEE от Samsung
   - используется в:
   - все устройства Samsung: телефоны, телевизоры, ...
   - также лицензированы производителями автомобильной техники
   ### Частная защищенная ОС # SiFive для WorldGuard
   - фирменная
   - ...
  ### Дополнительные статьи
   #### Интеграция Linux для безопасного взаимодействия с операционной системой
   - Известный уровень техники и современные решения, обеспечивающие поддержку драйверами Linux TEE-связи, IPC и управления сеансами
   #### Интерфейс TEE и расширения OpenSBI
   - Ведутся работы по модификации надежного встроенного ПО (например, OpenSBI) для поддержки новых расширений безопасности RISC-V (включая WorldGuard).

---

# Глава 2. Основные принципы доверенной среды выполнения и модель угроз
 ## Обзор TEE
  ### Определение и основные принципы
   #### Доверенная среда выполнения
   - описание: защищенная область главного процессора...
   - перечислите основные принципы
   #### Изоляция
   - разделение на расширенную среду и доверенную среду
   #### Целостность
   - гарантирует, что код и данные в нем не будут повреждены
   #### Конфиденциальность
   - Данные и код внутри TEE остаются конфиденциальными
   - Никакое программное обеспечение за пределами TEE не может получить доступ к данным внутри TEE
   #### Безопасное хранение
   - хранение конфиденциальных данных даже при выключенном питании
   #### Аттестация
   - подтверждение целостности с удаленного сервера
   #### Доверенное выполнение
   - В TEE может выполняться только авторизованный и проверенный код
   #### Минимальная доверенная вычислительная база (TCB)
   - минимизация компонентов, которым необходимо доверять
   - корень доверия

  ### Требования к безопасности и цели проектирования
   #### Основные компоненты
   - ...
   #### Изолированный модуль выполнения
   - выделенное ядро процессора
   - или изолированное состояние процессора
   #### Обычный мир
   - где работает расширенная среда выполнения
   #### Безопасный мир
   - где выполняется доверенная среда выполнения
   #### Доверенные приложения
   - Приложения, работающие внутри TEE и выполняющие конфиденциальные задачи
   #### Защищенное хранилище
   - данные хранятся за пределами TEE и всегда зашифрованы
   - но ключи никогда не могут покинуть TEE
   #### Изоляция памяти
   - Оперативная память разделена на обычные, защищенные и общие области
   - Обычная область недоступна для TEE
   - Защищенная область недоступна для REE
   - для передачи данных можно использовать только общую область
   #### Криптографический движок
   - аппаратный или программный модуль, обеспечивающий защищенные криптографические функции.
   #### Механизм аттестации
   - хэши компонентов TEE, подписанные защищенными ключами
   #### Защищенные API
   - Интерфейсы, через которые обычные приложения или расширенная среда выполнения могут запрашивать услуги у TEE

 ## Модель угроз
  ### Предположения о нормальном мире
   #### незащищенная ОС
   - Предполагается, что обычный мир полностью ненадежен
   - Обычный мир может быть взломан вредоносными программами, руткитами на уровне пользователя или ядра
   - Конфиденциальные данные не могут быть размещены в обычном мире
   #### Враждебная ОС
   - Обычный мир может попытаться атаковать TEE, используя привилегированный доступ
   - чтение или вмешательство в память TEE
   - перехват или воспроизведение обмена данными с TEE
   - Запуск атак типа "Отказ в обслуживании" на службы TEE
   #### Ограниченная видимость
   - TEE предполагает, что обычный мир не может получить доступ к данным TEE
   #### Контроль над незащищенными ресурсами
   - Normal World отвечает за пересылку запросов между доверенными приложениями в TEE и внешними источниками / пользователями
   #### Запланируйте приоритеты
   - Normal World может отказать в планировании или обслуживании запросов TEE
   - таким образом, по нашему мнению, не обычный world должен вызывать TEE, а TEE должен проверять запросы самостоятельно
  ### Векторы атак
   #### Атаки с прямым доступом к памяти
   - Если механизмы DMA (например, с периферийных устройств) не ограничены должным образом, они могут получить доступ к защищенной мировой памяти
   - Использование IOMMU имеет решающее значение
   #### Атаки по сторонним каналам
   - Используют косвенную утечку информации (время, мощность, электромагнитное излучение, поведение кэша)
   - например, Meltdown, Spectre, Red Bleeding
   - Следует использовать алгоритмы постоянного времени в TEE, аппаратные средства, защищающие от побочных каналов, помехи, методы разделения кэша или очистки
   #### Физические атаки
   - Физические атаки, использующие перебои в подаче электроэнергии, тактовые сбои, колебания напряжения или электромагнитные помехи, которые могут вызывать сбои в работе
   - Физический доступ в сочетании с привилегиями обычного пользователя может способствовать организации атак, таких как зондирование или передача вредоносных сигналов
   #### Использование API
   - Вредоносное программное обеспечение "Обычного мира" создает вредоносные входные данные или последовательности вызовов в "Безопасном мире", вызывая переполнение буфера, логические ошибки или повышение привилегий в "Безопасном мире"
   - Следует использовать строгую проверку входных данных, надежную конструкцию защищенной операционной системы
   #### Атаки типа "Человек посередине"
   - Канал связи между обычным миром и Secure World является основным интерфейсом
   - Обычный мир манипулирует сообщениями, воспроизводит их или удаляет, чтобы запутать службы Secure World или использовать их в своих целях
   - Используйте криптографические одноразовые номера, токены сеанса, для проверки целостности и актуальности
   #### Атаки типа "Отказ в обслуживании"
   - Наводнение Secure World звонками, нехватка ресурсов или блокировка связи
   - Ограничение скорости, контрольные таймеры, постепенная деградация
   #### Атаки на загрузку и встроенное по
   - Компрометация загрузчика или процесса обновления встроенного ПО может подорвать доверие к Secure World (загрузка вредоносной защищенной ОС или исправление надежных приложений).
   - Следует использовать безопасную загрузку, криптографическую проверку встроенного ПО и образы защищенного мира

 ## Расширение World Guard
  ### Обзор концепции World Guard
   #### ...
   - *глава 1 из спецификации wg*
  ### RISC-V ISA WorldGuard
   #### Расширения ISA WorldGuard
   - *глава 2.0 из спецификации wg*
   #### WorldGuard CSRs
   - *глава 2.1*
   #### Один мир на hart
   - *глава 2.2*
   #### Реагирование на нарушения прав доступа
   - *глава 2.5*
  ### Компоненты аппаратной платформы WorldGuard, не относящиеся к ISA
   #### Маркеры и средства проверки WorldGuard
   - *глава 3.0*
   #### Универсальное средство проверки WG
   - *глава 3.1.0*
   #### Карта памяти регистра конфигурации
   - *глава 3.1.1*
   #### Формат слота правил
   - *глава 3.1.2*
   #### Регистры сообщений об ошибках
   - *глава 3.1.4*
   #### Работа средства проверки
   - *глава 3.1.5*
   #### Сброс средства проверки
   - *глава 3.1.6*

## Последовательность загрузки и цепочка доверия
  ### Обзор последовательности загрузки RISC-V
   #### Общие сведения о загрузке системы RISC-V
   - Объясняет общую концепцию загрузки в системах RISC-V. Это включает в себя инициализацию аппаратного обеспечения, загрузку компонентов встроенного ПО и создание среды выполнения для последующих уровней программного обеспечения. В нем рассматриваются проблемы и ограничения при разработке безопасной загрузки.
   - Введение, описывающее общий процесс загрузки в системе RISC-V, объединяющей как защищенную, так и расширенную ОС (Linux)
   #### Загрузчик первого этапа (FSBL)
   - Описывает роль загрузчика первого этапа в процессе безопасной загрузки
   - Он отвечает за первоначальную настройку оборудования, проверку целостности последующих образов и загрузку следующего этапа загрузки в память.
   - Этот этап часто сохраняется в одноразовой программируемой памяти (OTP), устанавливая уровень доверия.
   #### Инициализация OpenSBI
   - Подробно описывается, как OpenSBI инициализирует двоичный интерфейс RISC-V Supervisor и подготавливает систему как к безопасной, так и к расширенной операционной системе
   - В этом разделе объясняется, как OpenSBI управляет многоядерной инициализацией при выделении первого ядра для безопасной операционной системы.
   #### Безопасный запуск операционной системы
   - Описывается загрузка и инициализация защищенной операционной системы на первом ядре
   - настройка защищенной и незащищенной памяти
   #### Запуск расширенной операционной системы
   - Описывает процесс инициализации и загрузки операционной системы Rich OS (Linux) на остальных ядрах
   - Объясняет, как Linux запускает и инициализирует драйвер для взаимодействия с Secure World
   - Затем продолжайте загрузку в обычном режиме
  ### Цепочка доверия
   #### Принципы безопасной загрузки и цепочки доверия
   - Знакомит с основными понятиями, лежащими в основе создания цепочки доверия
   - на каждом этапе процесса загрузки проверяется целостность и подлинность следующего
   - Объясняет, как корневые ключи и криптографические подписи обеспечивают соблюдение этой модели доверия.
   #### RISC-V Root of Trust
   - Рассматриваются аппаратные и микропрограммные компоненты, действующие в качестве основы доверия на платформах RISC-V
   - Приводятся подробные сведения о встроенном ПЗУ или OTP-памяти, используемых для хранения неизменяемых секретных данных, и о первом этапе аутентификации при загрузке.
   #### Одноразовая программируемая (OTP) память
   - Рассматривается использование технологий OTP-памяти для хранения криптографических ключей, кода загрузчика или других важных данных, которые составляют неизменную основу доверия к системе
   - Объясняется, как эта аппаратная функция предотвращает внесение изменений и повышает гарантии безопасности.
   #### Реализация безопасной загрузки
   - описывает, что безопасная загрузка выходит за рамки данного проекта, но что безопасная ОС реализована с учетом цепочки доверия и что нет никаких ограничений на ее внедрение в будущей работе

---

# Глава 3: Разработка и внедрение доверенной операционной системы**

 ## Cоображения по выбору интерфейса**
  ### TEE Client API: интерфейс межмировой связи
   #### РАБОТА с RISC-V
   - *1.0 от TEE-Client-Api.md*
   #### Разработка собственного минимального интерфейса TEE для глобальной платформы
   - *2.0 из TEE-Client-Api.md*
   #### Обзор исследовательских прототипов
   - *3.0 из TEE-Client-Api.md*
   #### Обоснование принятия подмножества API на основе глобальной платформы
   - Представлено обоснование выбора тщательно подобранного подмножества клиентского API для глобальной платформы TEE.

 ## Обзор архитектуры системы
  - в этом разделе представлен общий обзор структуры защищенной операционной системы и ее взаимодействия с обычным миром и аппаратным обеспечением.
  ### Архитектура высокого уровня
   #### Архитектурные уровни
   - Представлен многоуровневый характер системы, от аппаратного обеспечения/встроенного ПО (OpenSBI) до защищенной операционной системы, а затем до операционной системы обычного мира (Linux).
   - Подчеркивается изоляция между защищенным миром и обычным миром.
   #### Secure против Обзор обычного мира
   - Объясняет, как защищенная операционная система постоянно занимает первое ядро процессора, в то время как Linux работает на остальных ядрах.
   - Описывает роли и обязанности каждого мира, а также механизмы контроля за соблюдением границ.
  ### Основные компоненты системы
   #### Ядро, менеджеры ресурсов и службы TEE
   - Подробно описывает внутреннюю архитектуру защищенной операционной системы, включая защищенное ядро, диспетчеры ресурсов (для задач, памяти и IPC) и уровни служб TEE.
   - Описывает, как эти компоненты в совокупности обеспечивают безопасность, распределение ресурсов и службы времени выполнения для доверенных приложений.
   #### Общая память и связь на основе IPI
   - Представлены основные каналы международной связи, такие как общие кольца/буферы, используемые для очередей запросов и ответов.
   - Описывает, как межпроцессорные прерывания (IPI) RISC-V используются для сигнализации событий и синхронизации передачи данных между обычным и защищенным миром.
  ### Расположение и адресация памяти
   #### Физическая и виртуальная адресация
   - Предоставляет высокоуровневый обзор того, как Secure OS настраивает свои таблицы страниц и управляет физическими/виртуальными адресами.
   - Объясняет, чем отличаются сопоставления памяти в защищенном и обычном мире.
   #### Механизмы изоляции
   - Подробно описывает, как расширение World Guard обеспечивает соблюдение границ безопасности на аппаратном уровне.
   - Показывает, как Защищенный и обычный миры остаются изолированными, предотвращая несанкционированный доступ к защищенным страницам.
   #### Очереди общей памяти
   - Объясняет зарезервированные области памяти, которые служат общими буферами для безопасной обычной связи.
   - Освещает проблемы параллелизма и стратегии блокировки для работы с кольцевым буфером.
  ### Безопасный процесс выполнения операционной системы
   #### Обзор процесса загрузки
   - В нем кратко описываются важнейшие этапы перехода с OpenSBI на безопасную ОС и, в конечном итоге, передача оставшихся ядер Linux.
   - Более подробное обсуждение приведено в разделе “Процесс безопасной загрузки и инициализация”.
   #### Межмировые переходы
   - Описывает механизм, с помощью которого выполнение перемещается между защищенным и обычным миром (например, вызовы SMC, прерывания).
   - Описывает проверки достоверности перед предоставлением разрешения на переход из одного мира в другой и то, как ОС обеспечивает сохранение защищенного состояния.
   #### Планирование в Secure OS
   - Рассказывается о том, как Secure OS управляет задачами и потоками в однопроцессорной среде (первом ядре).
   - Обсуждаются политики планирования, логика переключения контекста и то, как задачи TEE не мешают планированию Linux.
  ### Безопасность и применение политик
   #### Модель безопасности, основанная на возможностях
   - Знакомит с основными понятиями, лежащими в основе дескрипторов объектов, безопасных системных вызовов и детального контроля доступа.
   - Объясняет, как проверяются и применяются возможности во время выполнения для предотвращения повышения привилегий.
   #### Интеграция с World Guard
   - Объединяет аппаратные проверки, предоставляемые расширением World Guard, с политикой программного обеспечения Secure OS.
   - Предоставляет обзор обработки сбоев при несанкционированном доступе или недопустимых переходах в мир.
  ### Жизненный цикл TA
   #### Создание
   - Описывает, как защищенная ОС регистрирует или загружает доверенные приложения (TA).
   - Описывает распределение памяти, начальную настройку кода и процедуру запуска процесса или потока TA.
   #### Compute
   - Описывает, как TA выполняется в защищенной операционной системе, включая взаимодействие с системными вызовами, доступ к ресурсам и параллелизм.
   - Обсуждает, как TA могут взаимодействовать с другими задачами или обычным миром на этапах их эксплуатации.
   #### Teardown
   - Объясняет порядок завершения работы TA, включая очистку дескриптора, освобождение памяти и создание отчетов об окончательном состоянии.
   - Гарантирует, что конфиденциальные данные не останутся доступными и система восстановит все ресурсы.

 ## Интеграция с WorldGuard
  ### Конфигурация WorldGuard
   #### Конфигурация мира (модель с двумя мирами)
   - Обзор того, как аппаратное обеспечение и память системы разделены между защищенным и обычным миром.
   - Объяснение концепции двух миров с акцентом на гарантии изоляции.
   - Определение ролей каждого мира (например, Защищенная ОС против Linux).
   - Описание того, как назначаются и управляются мировые идентификаторы (или аналогичные идентификаторы).
   #### Настройка WorldGuard Checker для безопасной изоляции
   - Обзор механизма аппаратной и программной проверки для обеспечения глобальной изоляции.
   - Настройка защищенных слотов оперативной памяти и областей памяти:
     - Безопасный подход к разделению памяти.
     - Блокировка областей памяти для безопасного мира
   - Настройка границ анклава/раздела:
     - Управление несколькими анклавами (если применимо) в безопасном мире.
     - Политика для управления доступом между анклавами или из обычного мира.
   - Интеграция атрибутов памяти (например, разрешений на чтение/запись/выполнение) с проверками WorldGuard.
  ### Интеграция с защищенной операционной системой
   #### Отчеты об ошибках
   - Механизмы обнаружения нарушений, связанных с WorldGuard (например, попыток несанкционированного доступа), и сообщения о них.
   - Структура ведения журнала и создания отчетов в Secure OS для отладки и аудита.
   - стратегии для остановки проблемных задач в случае критических ошибок.
   #### Управление переходами между мирами.
   - Описание процесса управления при переключении между обычным миром и безопасным миром.
   - Обработка переходов между мирами, вызванных прерываниями.
   - Использование специальных команд процессора или регистров для вызова переходов (если применимо).
   - Обеспечение минимальных затрат при сохранении гарантий безопасности.
   #### Коммуникационные страницы
   - Страницы общей памяти, выделенные с разрешениями для обоих миров.:
     - Расположение и выравнивание областей общей памяти.
     - Обеспечение соблюдения WorldGuard ограничений на чтение/запись.

## Процесс безопасной загрузки и инициализации
 - В этом разделе описывается процесс начальной загрузки защищенной операционной системы, переход от встроенного программного обеспечения платформы (OpenSBI) к полностью инициализированной защищенной среде.
 - Он охватывает раннюю инициализацию на уровне сборки, перенос ядра, включение MMU и инициализацию подсистем более высокого уровня, в конечном итоге завершаясь передачей управления любым компонентам “богатой ОС”.
  ### Ранняя инициализация безопасной ОС
   #### Передача управления OpenSBI
   - Объяснение протокола загрузки OpenSBI, который предоставляет защищенной операционной системе исходный контекст регистрации (например, a0, a1, содержащий определенные параметры).
   - SBI загружает FW_PAYLOAD_PATH (далее TEEOS) в boot core, что делает это ядро безопасным
   - Подробный обзор того, как OpenSBI запускает безопасную точку входа в ОС (_start).
   - Обработка или сохранение системных параметров (таких как указатель на дерево устройств) для дальнейшего использования.
   #### Настройка стека и базового расположения памяти
   - Выделение стека в физической памяти для безопасного выполнения.
   - Как ассемблерный код (head.S) вычисляет расположение стека (через PAGE_SIZE * 6).
   - Обеспечение выравнивания стека для корректной работы RISC-V.
   #### Первое перемещение ядра
   - выполнение шага “перемещения” из-за нюансов pie (исполняемый файл, не зависящий от местоположения).
   - Создание сопоставления идентификаторов (физического =виртуального) по адресу загрузки ядра, а также сопоставление ядра с назначенной виртуальной базой (KERNEL_VIRTUAL_BASE).
   - Использование сопоставлений больших страниц (например, 2 МБ или 1 ГБ) для упрощения при ранней загрузке.
   #### Включение MMU
   - Объяснение того, как настраивается регистр SATP
   - Обеспечение доступа к тексту ядра, данным и сегментам bss как в физической области, так и по виртуальному адресу ядра.
  ### Безопасная инициализация операционной системы
  - После установки минимального MMU и базового сопоставления защищенная операционная система переходит в свою основную среду C для окончательной настройки.
   #### Регистрация консоли
   - Инициализация и регистрация драйвера консоли (например, консоли SBI) в качестве основного канала ввода-вывода.
   - Настройка ранней отладки/печати журнала для облегчения составления отчетов об ошибках.
   #### Инициализация таблиц страниц
   - Создание и настройка более детализированных таблиц страниц, помимо первоначальных сопоставлений больших блоков.
   - Структуры для динамической регистрации регионов и защиты на уровне страниц.
   #### Повторное перемещение ядра (при необходимости)
   - Дальнейшее повторное сопоставление виртуальных адресов ядра после ранней загрузки.
   - Очистка временных сопоставлений, использованных на первом этапе перемещения.
   #### Инициализация обработчика перехвата
   - Настройка таблицы векторов или таблицы исключений для обработки синхронных исключений и прерываний.
   - Регистрация обработчиков ошибок, системных вызовов и других критических векторов исключений.
   #### Инициализировать таймеры
   - Настройка RISC-V таймера CSR или аппаратного обеспечения таймера для конкретной платформы.
   - Настройка таймеров раннего отсчета или планирования.
   #### Инициализировать распределитель страниц
   - Создание физического распределителя страниц (pmm_init()) для управления защищенной оперативной памятью.
   - Структуры данных (например, непрерывные свободные списки, растровые изображения) для отслеживания использования страницы.
   #### Инициализация распределителя таблиц
   - Распределитель памяти более высокого уровня (на основе kmalloc или slab).
   - Эффективное распределение объектов ядра (например, задач, потоков, каналов).
   #### Инициализация планировщика
   - Настройка структур данных планировщика для управления защищенными потоками или задачами операционной системы.
   - Запуск планировщика, управляемого таймером, с использованием подсистемы таймера.
   #### Инициализация корневой задачи
   - Создание корневой задачи (или начального процесса в пользовательском режиме в безопасном мире).
   - Загрузка или запуск любых важных системных служб.
   #### Инициализация канала связи с обычным миром.
   - Настройка областей общей памяти или очередей для связи с обычным миром.
   - Настройка механизмов прерывания или других каналов сигнализации (например, IPI).
   #### Инициализация доверенных приложений.
   - Загрузка и инициализация встроенных или предустановленных доверенных приложений (TAS).
   - Настройка среды для TAs, включая изоляцию памяти, планирование и интерфейсы системных вызовов.
 ### Инициализация расширенной операционной системы
  #### Инициализация с помощью OpenSBI
   - Передача управления обратно OpenSBI для продолжения нормальной загрузки Linux или другой операционной системы с расширенным функционалом.
   - TEEOS самостоятельно настраивается и выполняет специальный электронный вызов, который указывает на завершение работы
   - SBI загружает NWD_FW_PAYLOAD_PATH (далее REEOS) на другие процессоры
  #### Запуск ядра
   - после повторного подключения к sbi на защищенном ядре - sbi запустит второе незащищенное ядро
   - второе ядро запустит ядро Linux, и Linux самостоятельно подключит другие ядра
   - Linux не будет пытаться запускаться на первом защищенном ядре, поскольку оно было помечено как "защищенное" в начале запуска OpenSBI

 ## Изменения в OpenSBI
  ### ...

## Меж-мировое взаимодействие
 - В этой главе описываются механизмы, обеспечивающие обмен данными и передачу сигналов между защищенной операционной системой, работающей на основном процессорном ядре (ядрах), и обычным миром (например, Linux). Основное внимание в нем уделяется очередям с общей памятью, структуре сообщений, используемой для команд TEE, и механизму IPI для отправки прерываний между ядрами RISC-V.
  ### Очереди с общей памятью
   - Одним из фундаментальных механизмов связи между защищенным миром (SWd) и обычным миром (NWd) является использование очередей с общей памятью. Этот подход позволяет одновременно передавать сообщения, не требуя сложных операций блокировки.
   #### Алгоритм очереди без блокировок
   - *https://pskrgag.github.io/post/mpmc_vuykov/*
   #### Кольцевые буферы с общей памятью
   - Обзор того, как очереди физически размещаются на страницах общей памяти, доступных как для SWd, так и для NWd.
   - Схема кольцевого буфера: кольцевой массив ячеек для сообщений, указатели начала/конца и необязательные поля “последовательности” для синхронизации.
   - Рекомендации по выравниванию памяти для предотвращения ложного обмена данными или проблем, связанных с выравниванием.
   #### Очередь запросов
   - Выделенный кольцевой буфер, в который Обычный мир помещает запросы, которые должен обрабатывать Безопасный мир.
   - Шаги для постановки в очередь:
     1. Драйвер обычного мира записывает сообщение в кольцевой слот.
     2. Драйвер обновляет указатель на начало очереди, используя атомарную операцию.
     3. Отправляется IPI (или вызывается механизм опроса) для уведомления Secure World.
   #### Очередь ответов
   - Отдельный кольцевой буфер для безопасного мира, позволяющий отправлять ответы или уведомления о событиях обратно в обычный мир.
   - Безопасный мир записывает свой ответ в кольцевой слот, увеличивает конечный указатель и использует опрос NWd.
   #### Канарейка на общих страницах
   - Канареечные страницы размещаются вокруг общих страниц без битов доступа, поэтому любой доступ путем переполнения будет заблокирован
  ### Разделяемые области памяти
  - Помимо основных очередей, некоторые буферы или структуры данных большего размера могут быть общими.
   #### Распределение областей памяти
   - выделение выполняется путем вызова безопасной операции TEE_CMD_ID_MAP_SHARED_MEM
   - выделение выполняется в безопасном мире, оно выделяет страницы и устанавливает доступ к Безопасному миру и обычному миру
   - затем Secure OS сопоставит страницы с защищенным адресным пространством ядра, чтобы иметь к ним доступ
   - Linux должен сопоставить эти страницы с адресным пространством ядра Linux
   #### Освобождение области памяти
   - освобождение выполняется путем вызова безопасной операции TEE_CMD_ID_UNMAP_SHARED_MEM
   - Secure World освободит страницы и удалит доступ как из безопасного, так и из обычного мира
   - защищенная ОС отключит отображение страниц из защищенного адресного пространства ядра
   - тогда Linux должен отключить отображение страниц из адресного пространства ядра Linux
   #### Передача данных
   - поскольку память сопоставлена с ядром Linux и защищенной ОС, операционные системы могут передавать данные только путем обычного чтения и записи из памяти
  ### Структура сообщений
  - Все команды, передаваемые через очереди запросов/ответов, обычно соответствуют согласованному формату сообщений. В этом разделе подробно описывается структура wg_tee_cmd, которая инкапсулирует параметры и результаты работы TEE.
   #### структура wg_tee_cmd
   Эта структура содержит идентификаторы команд, отслеживание сеанса, коды ошибок и дополнительные параметры.
   #### идентификатор поля
   - uint32_t id
   - Определяет тип операции TEE.
   - Возможные значения::
     - TEE_CMD_ID_OPEN_SESSION
     - TEE_CMD_ID_CLOSE_SESSION
     - TEE_CMD_ID_INVOKE_CMD
     - TEE_CMD_ID_MAP_SHARED_MEM
     - TEE_CMD_ID_UNMAP_SHARED_MEM
   #### поле seq
   - uint32_t seq
   - поле seq является уникальным идентификатором команды
   - его значение генерируется просто с помощью атомарно увеличенного счетчика последовательностей
   #### поле session_id
   - uint32_t идентификатор сеанса
   - Определяет, к какому сеансу в TA относится эта команда.
   - Позволяет одному TA управлять несколькими открытыми сеансами одновременно.
   #### поле func_i
   - uint32_t func_id
   - каждое доверенное приложение реализует свою собственную функциональность, и TA может выполнять несколько действий
   - поле func_id описывает, какое действие нужно выполнить внутри TA
   #### поле err
   - uint32_t err
   - Используется в Secure World для возврата кодов ошибок или результатов состояния.
   - возможные результаты включают указание на успешное выполнение, сбои в разрешении или другие ошибки.
   #### uuid поля
   - uint8_t uuid[16]
   - Уникальный идентификатор для доверенного приложения.
   - Используется во время TEE_CMD_ID_OPEN_SESSION для выбора правильного TA.
   #### поле paddr
   - uint64_t paddr
   - Физический адрес, относящийся к TEE_CMD_ID_MAP_SHARED_MEM; указывает начальную страницу для отображения в качестве общедоступной.
   - поле остается неиспользуемым для других идентификаторов команд.
   #### номер поля_страниц
   - uint32_t num_pages
   - Количество смежных страниц для отображения, начиная с paddr, для TEE_CMD_ID_MAP_SHARED_MEM.
   - поле остается неиспользуемым для других идентификаторов команд.
   #### поле shmem_id
   - uint32_t идентификатор shmem_id
   - Дескриптор, возвращаемый защищенной операционной системой для ссылки на сопоставленную область общей памяти.
   - Позволяет использовать TEE_CMD_ID_UNMAP_SHARED_MEM для отмены сопоставления области
   #### параметры struct wg_param
   - Содержит 4 аргумента (каждый по 24 байта).
   - Простые аргументы хранятся напрямую
   - ссылки на память хранятся в виде трех 64-разрядных значений (размер, смещение, world_id).
   #### заполнение
   - размер поля для заполнения составляет 96 байт
   - Зарезервировано пространство для выравнивания структуры до 256 байт в целом.
   - Предотвращает нежелательное заполнение компилятором, влияющее на выравнивание очереди.
  ### Сигнализация на основе IPI
  - В то время как общие очереди обеспечивают структуру данных для сообщений, механизм межпроцессорных прерываний (IPI) запускает уведомления в режиме реального времени.
   #### Механизм IPI RISC-V
   - Подробный обзор контроллера прерываний RISC-V и того, как программное обеспечение настраивает IPI на целевой протокол hart.
   - Объяснение соответствующих CSR, отображаемых в памяти линий прерываний или вызовов OpenSBI для отправки IPI.
   - Типичные процедуры: установка бита в регистре IPI или вызов sbi_send_ipi с использованием маски hart.
   #### Обычная передача сигналов в защищенном мире
   - Процедура, в которой драйвер Linux или служба NWd обслуживают:
     1. Заполняем структуру wg_tee_cmd
     2. помещаем структуру в очередь запросов.
     3. Отправляем IPI в защищенный протокол hart с помощью вызова OpenSBI.
     4. Ждем ответа, опрашивая очередь ответов
   #### Переход от защищенной к обычной мировой сигнализации
   - Из-за ограничений архитектуры RISC-V самым простым подходом для защищенной операционной системы является размещение ответов в очереди ответов без каких-либо других сигналов обычного мира
   - Обратная передача IPI ограничена из-за ограничений RISC-V ISA - мы не можем отличить IPI уведомлений Secure OS от IPI других типов, поэтому Linux не сможет корректно обрабатывать IPI
   - поэтому драйвер NWd периодически проверяет очередь ответов
   - Затем запрашивающий поток пробуждается, и результат становится доступен.

## TEE API
  ### API глобальной платформы
   #### Введение в API глобальной платформы
   - *введение из спецификации API OP-TEE Global Platfrom*
  ### Клиентский API TEE
   #### Контексты TEE
   - *глава о контекстах*
   #### Сеансы TEE
   - *глава о сеансах*
   #### Общая память TEE
   - *раздел "разделяемая память"*
  ### Спецификация API TEE
   #### TEEC_UUID
   - описание ...
   #### TEEC_Result
   - описание ...
   #### TEEC_Context;
   - описание ...
   #### TEEC_Session;
   - описание ...
   #### TEEC_Value;
   - опишите ...
   #### TEEC_RegisteredMemoryReference;
   - опишите ...
   #### teec_параметр;
   - описание ...
   #### teec_операция;
   - описание ...
   #### TEEC_SharedMemory;
   - описание ...
   #### TEEC_InitializeContext
   - описание ...
   #### TEEC_FinalizeContext
   - описание ...
   #### TEEC_OpenSession
   - описание ...
   #### TEEC_CloseSession
   - описание ...
   #### TEEC_InvokeCommand
   - описание ...
   #### TEEC_AllocateSharedMemory
   - описание ...
   #### TEEC_ReleaseSharedMemory
   - описание ...

 ## Реализация драйвера Linux
  ### Общие очереди со стороны Linux
   #### Очередь запросов
   #### Очередь ответов
  ### Коммуникационный интерфейс Linux
   #### Инициализация связи
   #### Инициализация очереди
   #### Опрос kthread для обмена данными
   #### Отправка сообщений
   #### Получение результата
   #### Завершение обмена данными

 ## Разработка безопасного ядра
  ### Объекты и дескрипторы ядра
   #### Задачи (процессы)
   #### Потоки
   #### Каналы
   #### Объекты виртуальной памяти
   #### Примитивы синхронизации
  ### Управление задачами
   #### Модель процесса
   #### Служба IPC
   #### Корневая задача
  ### Планирование
   #### Служба планирования
   #### Политики планирования
  ### Подсистема управления памятью
   #### Безопасный распределитель памяти
   #### Изоляция памяти

 ## Capability-based Модель безопасности
  ### Обрабатывается как инкапсулированные возможности
   #### Объекты
   #### Обработчики объектов
   #### Фабричные объекты
   #### Объектные методы
  ### Управление доступом на основе возможностей
   #### Разрешения
   #### Манифесты задач
   #### Корневая задача
   #### Вызов метода

 ## Cистемные вызовы
  ### Безопасные точки входа
   #### проверка запросов TA
   #### ...
  ### Спецификация системного вызова
   #### СИСТЕМНЫЙ_ЛОГ
   #### SYS_VM_ALLOCATE
   #### SYS_VMO_CREATE
   #### СИСТЕМНЫЙ_КАНАЛ_СОЗДАТЬ
   #### СИСТЕМНЫЙ_КАНАЛ_ЧИТАТЬ
   #### SYS_TASK_CREATE
   #### SYS_TASK_GET_SPACE
   #### SYS_VM_MAP_VMO
   #### SYS_VM_FREE
   #### SYS_TASK_SPAWN
   #### СИСТЕМНЫЙ_КАНАЛ_ЗАПИСАТЬ
   #### СИСТЕМНЫЙ_ОБЪЕКТ_CLOSE
   #### СИСТЕМНЫЙ_ОБЪЕКТ_ВОЖДЕНИЕ_МНОГИХ
   #### СИСТЕМНАЯ_ФИЗИЧЕСКАЯ_МАРТА
   #### СИСТЕМНАЯ_ЗАДАЧА_SHARE_HANDLE
   #### SYS_OBJECT_COPY

 ## Платформа доверенных приложений
  ### Стандартная библиотека для доверенных приложений
   #### Обзор стандартной библиотеки
  ### Спецификация стандартной библиотеки ввода-вывода
   #### printf
   #### sprintf
   #### vprintf
  ### Спецификация стандартной библиотеки строк
   #### строковые функции
  ### Спецификация стандартной математической библиотеки
   #### алгебраические функции
   #### тригонометрические функции
   #### сложные математические функции
  ### Спецификация стандартной библиотеки криптографии
   #### криптофункции
   #### хэши
  ### Спецификация стандартной библиотеки связи
   #### разделяемая память
   #### каналы
  ### Спецификация стандартной библиотеки параллелизма
   #### мьютексы
   #### спин-блокировки

 ## Проблемы внедрения и оптимизации
  ### Производительность в сравнении с Компромиссы в области безопасности
  ### Оптимизация объема занимаемой памяти
  ### Соображения по отладке
  ### Создание системы и упаковки для TAs

 ## Краткое описание реализации
  ### ...

---

# Глава 4. Оценка и анализ безопасности

 ## Настройка стека программного обеспечения
  ### Среда эмуляции
   #### QEMU с поддержкой WorldGuard
   #### Модификации QEMU
   #### Конфигурация QEMU
  ### Linux
   #### Linux с поддержкой WorldGuard
   #### Модификации Linux
   #### Конфигурация Linux
   #### Образ Linux
  ### Система сборки
   #### Конфигурация Cmake
   #### Дизайн системы сборки Cmake
  ### Интеграция CI
   #### ...

 ## Демонстрация защищенной функциональности ОС
  ### Процесс создания порций
   #### Репозитории для клонирования
   #### набор инструментов для создания
   #### QEMU
   #### OpenSBI
   #### создание Linux
   #### создание безопасной операционной системы
  ### Пример простой службы доверенных приложений
   #### создание простого приложения
   #### создание TA
  ### Демонстрация выполнения TA
   #### загрузка системы
   #### запуск драйвера Linux и открытие сеанса
   #### Вызов примера TA

 ## Анализ безопасности
  ### Обзор модели угроз и целей безопасности
   #### Возможные направления атак и способы их устранения
   #### Соответствие модели угроз

  ### Устойчивость к обычным атакам в мире
   #### Несанкционированный доступ к защищенной памяти
   - (Предотвращено World Guard/PMP)
   #### Несанкционированный доступ к защищенному коду операционной системы/TA
   - (Предотвращен World Guard/PMP)
   #### Попытки повреждения очередей разделяемой памяти
   - (Проверка, проверка безопасности операционной системы)
   #### Использование протокола CWC
   - (Проверка ввода, управление состоянием)
  ### Устойчивость к ошибочным TA
   #### Изоляция между TA
   - Память
   #### Возможности
  ### Потенциальные уязвимости и ограничения
   #### Атаки по сторонним каналам
   - (Краткое обсуждение, дальнейшая работа)
   #### Физические атаки
   - (Как правило, это не относится к программным TEE)
   #### Сложность TCB (Trusted Computing Base)
   #### Атаки на Root-сервер доверия

 ## Оценка производительности
  ### Задержка операций
   #### Задержка при открытии
   #### Задержка при вызове
   #### Задержка при закрытии
  ### Производительность связи
   #### Пропускная способность канала CWC
   #### Затраты на переключение контекста TA
   #### Объем памяти

 ## Выводы

 ## Будущая работа
  ### Расширенные возможности TA
   #### Защищенное хранилище
   #### Сертификация
   #### Корень доверия
   #### Криптографические сервисы
  ### Реализация надежного пользовательского интерфейса
  ### Поддержка многоядерных процессоров для обеспечения безопасности в мире
  ### Формальная проверка защищенных компонентов
  ### Динамическая загрузка TA
  ### Перенос на реальное оборудование RISC-V с помощью WorldGuard
  ### Защита от атак

# Ссылки

# Приложения
## Пример кода TA
## Манифесты TA
## Защищенный код операционной системы
## Защищенный код стандартной библиотеки