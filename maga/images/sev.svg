<svg viewBox="0 0 800 700" xmlns="http://www.w3.org/2000/svg">
  <!-- Определение стрелок -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" 
            refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#a2b9e8" />
    </marker>
  </defs>

  <!-- Заголовок -->
  <text x="400" y="30" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="26" font-weight="bold" fill="#7491c9">Архитектура AMD SEV</text>

  <!-- Hypervisor Layer -->
  <rect x="50" y="70" width="700" height="150" rx="15" ry="15" 
        fill="#f1cdcc" stroke="#d9a8a6" stroke-width="2"/>
  <text x="400" y="100" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="20" font-weight="bold" fill="#b88785">Недоверенный гипервизор</text>
  
  <!-- Hypervisor Components -->
  <rect x="80" y="120" width="200" height="80" rx="10" ry="10" 
        fill="#fae5ce" stroke="#e8c8a3" stroke-width="1"/>
  <text x="180" y="155" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="16" fill="#c9a47b">Управление VM</text>
  <text x="180" y="180" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="14" fill="#d4b88a">(KVM/Xen/VMware)</text>

  <rect x="300" y="120" width="200" height="80" rx="10" ry="10" 
        fill="#fdf2cd" stroke="#e6d4a3" stroke-width="1"/>
  <text x="400" y="155" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="16" fill="#c2a878">Планировщик</text>
  <text x="400" y="180" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="14" fill="#d4b88a">ресурсов</text>

  <rect x="520" y="120" width="200" height="80" rx="10" ry="10" 
        fill="#e3b9b0" stroke="#c89a91" stroke-width="1"/>
  <text x="620" y="155" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="16" fill="#a67b73">Управление</text>
  <text x="620" y="180" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="14" fill="#b88785">памятью</text>

  <!-- Guest VMs -->
  <g id="vm1">
    <rect x="80" y="250" width="300" height="200" rx="15" ry="15" 
          fill="#daead3" stroke="#b5d1a9" stroke-width="3"/>
    <text x="230" y="280" text-anchor="middle" font-family="Arial, sans-serif" 
          font-size="18" font-weight="bold" fill="#8fb380">Зашифрованная VM 1</text>
    
    <rect x="100" y="310" width="120" height="60" rx="10" ry="10" 
          fill="#ccdaf7" stroke="#a2b9e8" stroke-width="1"/>
    <text x="160" y="340" text-anchor="middle" font-family="Arial, sans-serif" 
          font-size="14" fill="#7491c9">Гостевая ОС</text>
    <text x="160" y="360" text-anchor="middle" font-family="Arial, sans-serif" 
          font-size="14" fill="#8fabc9">Linux</text>
    
    <rect x="240" y="310" width="120" height="60" rx="10" ry="10" 
          fill="#d1e2f3" stroke="#a8bed7" stroke-width="1"/>
    <text x="300" y="340" text-anchor="middle" font-family="Arial, sans-serif" 
          font-size="14" fill="#7c9cbd">Приложения</text>
    <text x="300" y="360" text-anchor="middle" font-family="Arial, sans-serif" 
          font-size="14" fill="#8fabc9">и данные</text>
    
    <rect x="100" y="390" width="260" height="40" rx="8" ry="8" 
          fill="#d1e0e3" stroke="#a9c2c6" stroke-width="1"/>
    <text x="230" y="415" text-anchor="middle" font-family="Arial, sans-serif" 
          font-size="14" fill="#7fa1a6">Зашифрованная память VM</text>
  </g>

  <g id="vm2">
    <rect x="420" y="250" width="300" height="200" rx="15" ry="15" 
          fill="#daead3" stroke="#b5d1a9" stroke-width="3"/>
    <text x="570" y="280" text-anchor="middle" font-family="Arial, sans-serif" 
          font-size="18" font-weight="bold" fill="#8fb380">Зашифрованная VM 2</text>
    
    <rect x="440" y="310" width="120" height="60" rx="10" ry="10" 
          fill="#ccdaf7" stroke="#a2b9e8" stroke-width="1"/>
    <text x="500" y="340" text-anchor="middle" font-family="Arial, sans-serif" 
          font-size="14" fill="#7491c9">Гостевая ОС</text>
    <text x="500" y="360" text-anchor="middle" font-family="Arial, sans-serif" 
          font-size="14" fill="#8fabc9">Windows</text>
    
    <rect x="580" y="310" width="120" height="60" rx="10" ry="10" 
          fill="#d1e2f3" stroke="#a8bed7" stroke-width="1"/>
    <text x="640" y="340" text-anchor="middle" font-family="Arial, sans-serif" 
          font-size="14" fill="#7c9cbd">Приложения</text>
    <text x="640" y="360" text-anchor="middle" font-family="Arial, sans-serif" 
          font-size="14" fill="#8fabc9">и данные</text>
    
    <rect x="440" y="390" width="260" height="40" rx="8" ry="8" 
          fill="#d1e0e3" stroke="#a9c2c6" stroke-width="1"/>
    <text x="570" y="415" text-anchor="middle" font-family="Arial, sans-serif" 
          font-size="14" fill="#7fa1a6">Зашифрованная память VM</text>
  </g>

  <!-- AMD SP/PSP -->
  <rect x="250" y="480" width="300" height="80" rx="12" ry="12" 
        fill="#d9d2e9" stroke="#b8acd1" stroke-width="2"/>
  <text x="400" y="510" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="18" font-weight="bold" fill="#9081b3">AMD Secure Processor</text>
  <text x="400" y="535" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="14" fill="#a293c2">Управление ключами</text>
  <text x="400" y="555" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="14" fill="#a293c2">и аттестация</text>

  <!-- Memory Controller -->
  <rect x="250" y="580" width="300" height="60" rx="10" ry="10" 
        fill="#e9d1dc" stroke="#d2a9bc" stroke-width="2"/>
  <text x="400" y="605" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="16" font-weight="bold" fill="#c193a6">Контроллер памяти</text>
  <text x="400" y="625" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="14" fill="#d4aab9">с AES-шифрованием</text>

  <!-- Arrows -->
  <line x1="230" y1="450" x2="350" y2="480" stroke="#b5d1a9" stroke-width="2" 
        marker-end="url(#arrowhead)"/>
  <line x1="570" y1="450" x2="450" y2="480" stroke="#b5d1a9" stroke-width="2" 
        marker-end="url(#arrowhead)"/>
  
  <line x1="400" y1="560" x2="400" y2="580" stroke="#9081b3" stroke-width="2" 
        marker-end="url(#arrowhead)"/>

  <!-- Isolation indicators -->
  <line x1="400" y1="250" x2="400" y2="450" stroke="#c193a6" stroke-width="3" 
        stroke-dasharray="5,5"/>
  <text x="370" y="240" font-family="Arial, sans-serif" 
        font-size="14" fill="#c193a6">Изоляция</text>

  <!-- Side annotations -->
  <g id="features">
    <text x="50" y="500" font-family="Arial, sans-serif" 
          font-size="16" font-weight="bold" fill="#8fb380">Возможности:</text>
    <text x="50" y="525" font-family="Arial, sans-serif" 
          font-size="14" fill="#92b2b6">• SEV - шифрование</text>
    <text x="50" y="545" font-family="Arial, sans-serif" 
          font-size="14" fill="#92b2b6">• SEV-ES - состояние</text>
    <text x="50" y="565" font-family="Arial, sans-serif" 
          font-size="14" fill="#92b2b6">• SEV-SNP - целостность</text>
    <text x="50" y="585" font-family="Arial, sans-serif" 
          font-size="14" fill="#92b2b6">• Удалённая аттестация</text>
  </g>

  <g id="protection">
    <text x="600" y="500" font-family="Arial, sans-serif" 
          font-size="16" font-weight="bold" fill="#b88785">Защита от:</text>
    <text x="600" y="525" font-family="Arial, sans-serif" 
          font-size="14" fill="#c89a98">• Гипервизора</text>
    <text x="600" y="545" font-family="Arial, sans-serif" 
          font-size="14" fill="#c89a98">• Других VM</text>
    <text x="600" y="565" font-family="Arial, sans-serif" 
          font-size="14" fill="#c89a98">• Физического доступа</text>
    <text x="600" y="585" font-family="Arial, sans-serif" 
          font-size="14" fill="#c89a98">• Облачного провайдера</text>
  </g>

  <!-- CPU indicator -->
  <rect x="350" y="655" width="100" height="25" rx="5" ry="5" 
        fill="#e9d1dc" stroke="#c193a6" stroke-width="1"/>
  <text x="400" y="672" text-anchor="middle" font-family="Arial, sans-serif" 
        font-size="14" fill="#a07589">AMD EPYC</text>
</svg>
